<html>
  <head>

    <title>MTA IFrame Tester</title>

  </head>

  <body>

    <h1>MTA IFrame Tester</h1>
    
     <iframe id="mtaframe" src="/iframe" width="600" height="400">
     <!-- NOTE: if you don't have a distinct closing tag, script doesn't work! -->
     </iframe>

     <p>
     <b>Offers:</b><br/>
     <div id="offers">

     </div>

    <script type="text/javascript">

      document.getElementById("mtaframe").onload = function() {

          document.offerEvent.subscribe(onOfferEvent, document);
      };

      onOfferEvent = function(type, args, me) { 
        var offer = args[0];
	var metadata = document.createElement("div");
	metadata.innerHTML = offer.get_metadata();
//	metadata.innerHTML = offer.get_deed_uri();
	var container = document.getElementById("offers");
	container.appendChild(metadata);
      };

    </script>


  </body>



</html>
