<html><head><title>TextMetrics.js</title><link rel="stylesheet" type="text/css" href="../resources/style.css" media="screen"/></head><body><h1>TextMetrics.js</h1><pre class="highlighted"><code>Ext.util.TextMetrics = <b>function</b>(){
    <b>var</b> shared;
    <b>return</b> {
        measure : <b>function</b>(el, text, fixedWidth){
            <b>if</b>(!shared){
                shared = Ext.util.TextMetrics.Instance(el, fixedWidth);
            }
            shared.bind(el);
            shared.setFixedWidth(fixedWidth || 'auto');
            <b>return</b> shared.getSize(text);
        },

        createInstance : <b>function</b>(el, fixedWidth){
            <b>return</b> Ext.util.TextMetrics.Instance(el, fixedWidth);
        }
    };
}();

Ext.util.TextMetrics.Instance = <b>function</b>(bindTo, fixedWidth){
    <b>var</b> ml = <b>new</b> Ext.Element(document.createElement('div'));
    document.body.appendChild(ml.dom);
    ml.position('absolute');
    ml.setLeftTop(-1000, -1000);
    ml.hide();

    <b>if</b>(fixedWidth){
        mi.setWidth(fixedWidth);
    }

    <b>var</b> instance = {
        getSize : <b>function</b>(text){
            ml.update(text);
            <b>var</b> s = ml.getSize();
            ml.update('');
            <b>return</b> s;
        },

        bind : <b>function</b>(el){
            ml.setStyle(
                Ext.fly(el).getStyles('font-size','font-style', 'font-weight', 'font-family','line-height')
            );
        },

        setFixedWidth : <b>function</b>(width){
            ml.setWidth(width);
        },

        getWidth : <b>function</b>(text){
            ml.dom.style.width = 'auto';
            <b>return</b> this.getSize(text).width;
        },

        getHeight : <b>function</b>(text){
            <b>return</b> this.getSize(text).height;
        }
    };

    instance.bind(bindTo);

    <b>return</b> instance;
};

<i>// backwards compat</i>
Ext.Element.measureText = Ext.util.TextMetrics.measure;</code></pre><hr><div style="font-size:10px;text-align:center;color:gray;">Ext - Copyright &copy; 2006-2007 Ext JS, LLC<br />All rights reserved.</div>
    </body></html>